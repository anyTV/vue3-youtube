(function(n,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue")):typeof define=="function"&&define.amd?define(["vue"],m):(n=typeof globalThis<"u"?globalThis:n||self,n.GithubPackagesUiLibrary=m(n.Vue))})(this,function(n){"use strict";var m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var k={exports:{}};(function(e,v){(function(d,t){e.exports=t()})(m,function(d){return function(t,a){if(a==null&&(a={fuzzy:!0}),/youtu\.?be/.test(t)){var i,f=[/youtu\.be\/([^#\&\?]{11})/,/\?v=([^#\&\?]{11})/,/\&v=([^#\&\?]{11})/,/embed\/([^#\&\?]{11})/,/\/v\/([^#\&\?]{11})/];for(i=0;i<f.length;++i)if(f[i].test(t))return f[i].exec(t)[1];if(a.fuzzy){var l=t.split(/[\/\&\?=#\.\s]/g);for(i=0;i<l.length;++i)if(/^[^#\&\?]{11}$/.test(l[i]))return l[i]}}return null}})})(k);var R=k.exports;const A=_(R),B={props:["wrapperStyle"],mounted(){this.$emit("load",{target:this.$el})}},S=(e,v)=>{const d=e.__vccOpts||e;for(const[t,a]of v)d[t]=a;return d};function E(e,v,d,t,a,i){return n.openBlock(),n.createElementBlock("div",{style:n.normalizeStyle(d.wrapperStyle)},null,4)}const x=S(B,[["render",E]]),U={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};function Y({player:e}){function v(o,c,s){e.value?.cueVideoById(o,c,s)}function d(o,c,s){e.value?.loadVideoById(o,c,s)}function t(o,c,s){e.value?.cueVideoByUrl(o,c,s)}function a(o,c,s){e.value?.loadVideoByUrl(o,c,s)}function i(o,c,s,I){e.value?.cuePlaylist(o,c,s,I)}function f(o,c,s,I){e.value?.loadPlaylist(o,c,s,I)}function l(){e.value?.playVideo()}function b(){e.value?.pauseVideo()}function p(){e.value?.stopVideo()}function P(o,c){e.value?.seekTo(o,c)}function V(){e.value?.nextVideo()}function g(){e.value?.previousVideo()}function u(o){e.value?.playVideoAt(o)}function y(){e.value?.mute()}function T(){e.value?.unMute()}function w(){return e.value?e.value.isMuted():!1}function h(o){e.value?.setVolume(o)}function r(){return e.value?e.value.getVolume():0}function C(){return e.value?e.value.getPlaybackRate():0}function D(o){e.value?.setPlaybackRate(o)}function L(){return e.value?e.value.getAvailablePlaybackRates():[]}function N(o){e.value?.setLoop(o)}function $(o){e.value?.setShuffle(o)}function z(){return e.value?e.value.getVideoLoadedFraction():0}function Q(){return e.value?e.value.getPlayerState():U.UNSTARTED}function j(){return e.value?e.value.getCurrentTime():0}function F(){return e.value?e.value.getPlaybackQuality():"default"}function M(o){e.value?.setPlaybackQuality(o)}function G(){return e.value?e.value.getAvailableQualityLevels():[]}function q(){return e.value?e.value.getDuration():0}function O(){return e.value?e.value.getVideoUrl():""}function H(){return e.value?e.value.getVideoEmbedCode():""}function J(){return e.value?e.value.getPlaylist():[]}function K(){return e.value?e.value.getPlaylistIndex():0}return{cueVideoById:v,loadVideoById:d,cueVideoByUrl:t,loadVideoByUrl:a,cuePlaylist:i,loadPlaylist:f,playVideo:l,pauseVideo:b,stopVideo:p,seekTo:P,nextVideo:V,previousVideo:g,playVideoAt:u,mute:y,unMute:T,isMuted:w,setVolume:h,getVolume:r,getPlaybackRate:C,setPlaybackRate:D,getAvailablePlaybackRates:L,setLoop:N,setShuffle:$,getVideoLoadedFraction:z,getPlayerState:Q,getCurrentTime:j,getPlaybackQuality:F,setPlaybackQuality:M,getAvailableQualityLevels:G,getDuration:q,getVideoUrl:O,getVideoEmbedCode:H,getPlaylist:J,getPlaylistIndex:K}}return n.defineComponent({__name:"YouTube",props:{src:{},height:{default:360},width:{default:640},host:{default:"https://www.youtube.com"},vars:{}},emits:["ready","state-change","playback-quality-change","playback-rate-change","error","api-change","autoplay-blocked"],setup(e,{expose:v,emit:d}){const t=e,a=d,i=n.computed(()=>A(t.src)||t.src),f=n.computed(()=>({width:`${t.width}px`,height:`${t.height}px`,position:"relative"}));n.ref();const l=n.ref(),b=n.ref(!1),p=n.ref(!1);n.ref({position:"absolute",top:"0",left:"0",width:"100%",height:"100%"});function P(g){b.value||(b.value=!0,console.log("initPlayer",{div:g}),l.value=new YT.Player(g,{height:t.height,width:t.width,videoId:i.value,host:t.host,playerVars:t.vars,events:{onReady:u=>{p.value=!0,setTimeout(()=>a("ready",u))},onStateChange:u=>a("state-change",u),onPlaybackQualityChange:u=>a("playback-quality-change",u),onPlaybackRateChange:u=>a("playback-rate-change",u),onError:u=>a("error",u),onApiChange:u=>a("api-change",u),onAutoplayBlocked:u=>{a("autoplay-blocked",u)}}}))}function V(g){const u=g.target;let y=()=>{};new Promise(r=>y=r).then(()=>P(u)),window.onYouTubeIframeAPIReadyResolvers||(window.onYouTubeIframeAPIReadyResolvers=[]),window.onYouTubeIframeAPIReady||(window.onYouTubeIframeAPIReady=()=>{window.onYouTubeIframeAPIReadyResolvers?.forEach(r=>{r()})});const w="youtube-iframe-js-api-script";let h=document.getElementById(w);if(h)y();else{window.onYouTubeIframeAPIReadyResolvers?.push(y),h=document.createElement("script"),h.id=w,h.src="https://www.youtube.com/iframe_api";const r=document.getElementsByTagName("script")[0];r&&r.parentNode&&r.parentNode.insertBefore(h,r)}}return n.watch(()=>t.width,()=>{l.value?.setSize(+t.width,+t.height)}),n.watch(()=>t.height,()=>{l.value?.setSize(+t.width,+t.height)}),n.watch(()=>t.src,()=>{b.value&&l.value&&l.value?.loadVideoById(i.value)}),n.onBeforeUnmount(()=>{l.value?.destroy()}),v(Y({player:l})),(g,u)=>(n.openBlock(),n.createElementBlock("div",{style:n.normalizeStyle(f.value)},[n.createVNode(x,{wrapperStyle:f.value,onLoad:V},null,8,["wrapperStyle"])],4))}})});
